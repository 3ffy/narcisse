<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Narcisse</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Narcisse is a great UX demo to show an image at the left of your website.">
    <meta name="author" content="3ffy - AurÃ©lien GY">

	<!-- The styles -->
	<link href="http://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css" rel="stylesheet">

	<link href="main.css" rel="stylesheet">
	
    <!-- The HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

  <script src="http://code.jquery.com/jquery-2.1.1.min.js"></script>
	<script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>

	<script>
		/**
		 * There is no javascript involved into the background calculation etc, this is full css.
		 * But let's add some javascript to manage :
		 * 		- image randomization
		 * 		- image management (events, modifying, etc.)
		 * 		- prevent images to be loaded in viewport phone !
		 */
		
    /**
     * Pick a random key from a javascript object (aka associative arrays).
     *
     * @param {Object} obj A javascript object with string as keys.
     * @return {string} The key picked.
     */
		var randomProperty = function (obj) {
		    var keys = Object.keys(obj)
		    return keys[ keys.length * Math.random() << 0];
		};

		$(document).ready(function(){

			//catch narcisse events (just for the demo)
			$('#background-container').on('narcisse', function(e, data){
				console.log('narcisse modified, new background image =', data.key);
			});

      //add some direct links to modify current image (just for the demo)
      $('a.narcisse').click(function(e){
        e.preventDefault();
        //get the narcisse id from data attributes
        var id = $(this).data('narcisse-id');
        //call narcisse manually
        narcisse(id);
      });

      var $window = $(window);

			//define images and ideal position (where the relevant content is inside the image)
			var narcisseRessources = {
				'venise1':
					{
						path: 'img/venise1.jpg'
					},
				'venise2':
					{
						path: 'img/venise2.jpg',
						position: 46
					},
				'venise3':
					{
						path: 'img/venise3.jpg',
						position: 46
					},
				'venise4':
					{
						path: 'img/venise4.jpg',
						position: 50
					},
        'sacha':
          {
            path: 'img/sacha.jpg',
            position: 11
          },
        'pikachu':
          {
            path: 'img/pikachu.png',
            position: 53
          },
        'togepi1':
          {
            path: 'img/togepi.svg',
            position: 55
          },
        'togepi2':
          {
            path: 'img/togepi.svg',
            position: 55,
            bgcolor: '#0f0'
          }
			};

      /**
       * Lock to prevent the narcisse function to be executed each time the windows is resized.
       * @type {bool}
       */
      var narcisseAlreadyCalculated = false;

      /**
       * Narcisse function.
       *
       * @param {string} id [optional] You can provide one of the id of the narcisse ressources object.
       */
			var narcisse = function(id){
        var modeManual = typeof id == 'string';
        if(modeManual == true || narcisseAlreadyCalculated == false){
          //do something only if we are not in vieport phone
          var responsive_viewport = window.innerWidth || $window.width();
          if(responsive_viewport >= 768){
            //get the index & pick to use and check them
            var index = (modeManual == true)? id : randomProperty(narcisseRessources);
            var pick = narcisseRessources[index];
            if(typeof pick == 'undefined'){
              throw 'The id ' + id + ' can\'t be found in the narcisse ressources.';
            }
            //use the pick css property to modify background
            var $elem = $('#background-container');
            var position = (typeof pick.position == 'undefined')? 0 : pick.position;
            var bgcolor = (typeof pick.bgcolor == 'undefined')? '' : pick.bgcolor;
            $elem
              .css('background-image', 'url(' + pick.path + ')')
              .css('background-position', position + '% top')
              .css('background-color', bgcolor);
            //fire a custom event with the name of the narcisse id picked
            $elem
              .trigger('narcisse', {'key': index});
            //prevent next calls
            narcisseAlreadyCalculated = true;     
          }
        }
			};

      //init narcisse behaviour
      $window.resize(narcisse);
      narcisse();

		});
	</script>

  </head>

 <body>

	<div id="menu-vertical" class="navbar navbar-inverse">
      <div class="navbar-inner">
        <div class="container">

          <a class="brand" href="https://github.com/3ffy/narcisse">Narcisse</a>
          <div>
            <ul class="nav">
				<li class="active"><a href="#title">Title</a></li>
				<li><a href="#demo">Demo</a></li>
				<li><a href="#purpose">Purpose</a></li>
				<li><a href="#code">Code</a></li>
				<li><a href="#issues">Issues</a></li>
				<li><a href="#getinvolved">You</a></li>
				<li><a href="#licence">Licence</a></li>
            </ul>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>

    <div id="menu-horyzontal" class="navbar navbar-inverse navbar-fixed-top" role="navigation">
      <div class="container-fluid">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="#">Project name</a>
        </div>
        <div class="navbar-collapse collapse" style="height: 1px;">
          <ul class="nav navbar-nav navbar-right">
            <li><a href="#">Dashboard</a></li>
            <li><a href="#">Settings</a></li>
            <li><a href="#">Profile</a></li>
            <li><a href="#">Help</a></li>
          </ul>
          <form class="navbar-form navbar-right">
            <input type="text" class="form-control" placeholder="Search...">
          </form>
        </div>
      </div>
    </div>

    <div id="page-container" class="container-fluid">
      <div class="row">

        <div id="background-container" class="col-sm-3 col-md-4"></div>

        <div id="true-body" class="col-sm-9 col-sm-offset-3 col-md-8 col-md-offset-4">
          <h1 class="page-header">Dashboard</h1>
          <div class="row">
            <ul>
              <li>
                <a class="narcisse" data-narcisse-id="venise1" href="#" title="show venise1">Venise1</a>
              </li>
              <li>
                <a class="narcisse" data-narcisse-id="venise2" href="#" title="show venise2">Venise2 (example with an heavy picture +2mo)</a>
              </li>
              <li>
                <a class="narcisse" data-narcisse-id="venise3" href="#" title="show venise3">Venise3</a>
              </li>
              <li>
                <a class="narcisse" data-narcisse-id="venise4" href="#" title="show venise4">Venise4</a>
              </li>
              <li>
                <a class="narcisse" data-narcisse-id="venise1000" href="#" title="show venise1000">Venise1000 (don't exists, just for test narcisse behaviour on errors</a>
              </li>
              <li>
                <a class="narcisse" data-narcisse-id="sacha" href="#" title="show sacha">Example with portrait</a>
              </li>
              <li>
                <a class="narcisse" data-narcisse-id="pikachu" href="#" title="show pikachu">Example with landscape *.png portrait</a>
              </li>
              <li>
                <a class="narcisse" data-narcisse-id="togepi1" href="#" title="show togepi1">Example with transparent *.svg file</a>
              </li>
              <li>
                <a class="narcisse" data-narcisse-id="togepi2" href="#" title="show togepi2">Example with transparent *.svg file and custome background color</a>
              </li>
            </ul>

            <p class="alert alert-success">
              <strong>Holy guacamole !</strong>
              All these pictures are taken by your servitor during a personal trip in Venisa. They are not part of the licence, please don't use them without my agreement !
            </p>
          </div>
          <div class="row placeholders">
            <div class="col-xs-6 col-sm-3 placeholder">
              <img data-src="holder.js/200x200/auto/sky" class="img-responsive" alt="200x200" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMDAiIGhlaWdodD0iMjAwIj48cmVjdCB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgZmlsbD0iIzBEOEZEQiIvPjx0ZXh0IHRleHQtYW5jaG9yPSJtaWRkbGUiIHg9IjEwMCIgeT0iMTAwIiBzdHlsZT0iZmlsbDojZmZmO2ZvbnQtd2VpZ2h0OmJvbGQ7Zm9udC1zaXplOjEzcHg7Zm9udC1mYW1pbHk6QXJpYWwsSGVsdmV0aWNhLHNhbnMtc2VyaWY7ZG9taW5hbnQtYmFzZWxpbmU6Y2VudHJhbCI+MjAweDIwMDwvdGV4dD48L3N2Zz4=">
              <h4>Label</h4>
              <span class="text-muted">Something else</span>
            </div>
            <div class="col-xs-6 col-sm-3 placeholder">
              <img data-src="holder.js/200x200/auto/vine" class="img-responsive" alt="200x200" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMDAiIGhlaWdodD0iMjAwIj48cmVjdCB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgZmlsbD0iIzM5REJBQyIvPjx0ZXh0IHRleHQtYW5jaG9yPSJtaWRkbGUiIHg9IjEwMCIgeT0iMTAwIiBzdHlsZT0iZmlsbDojMUUyOTJDO2ZvbnQtd2VpZ2h0OmJvbGQ7Zm9udC1zaXplOjEzcHg7Zm9udC1mYW1pbHk6QXJpYWwsSGVsdmV0aWNhLHNhbnMtc2VyaWY7ZG9taW5hbnQtYmFzZWxpbmU6Y2VudHJhbCI+MjAweDIwMDwvdGV4dD48L3N2Zz4=">
              <h4>Label</h4>
              <span class="text-muted">Something else</span>
            </div>
            <div class="col-xs-6 col-sm-3 placeholder">
              <img data-src="holder.js/200x200/auto/sky" class="img-responsive" alt="200x200" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMDAiIGhlaWdodD0iMjAwIj48cmVjdCB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgZmlsbD0iIzBEOEZEQiIvPjx0ZXh0IHRleHQtYW5jaG9yPSJtaWRkbGUiIHg9IjEwMCIgeT0iMTAwIiBzdHlsZT0iZmlsbDojZmZmO2ZvbnQtd2VpZ2h0OmJvbGQ7Zm9udC1zaXplOjEzcHg7Zm9udC1mYW1pbHk6QXJpYWwsSGVsdmV0aWNhLHNhbnMtc2VyaWY7ZG9taW5hbnQtYmFzZWxpbmU6Y2VudHJhbCI+MjAweDIwMDwvdGV4dD48L3N2Zz4=">
              <h4>Label</h4>
              <span class="text-muted">Something else</span>
            </div>
            <div class="col-xs-6 col-sm-3 placeholder">
              <img data-src="holder.js/200x200/auto/vine" class="img-responsive" alt="200x200" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMDAiIGhlaWdodD0iMjAwIj48cmVjdCB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgZmlsbD0iIzM5REJBQyIvPjx0ZXh0IHRleHQtYW5jaG9yPSJtaWRkbGUiIHg9IjEwMCIgeT0iMTAwIiBzdHlsZT0iZmlsbDojMUUyOTJDO2ZvbnQtd2VpZ2h0OmJvbGQ7Zm9udC1zaXplOjEzcHg7Zm9udC1mYW1pbHk6QXJpYWwsSGVsdmV0aWNhLHNhbnMtc2VyaWY7ZG9taW5hbnQtYmFzZWxpbmU6Y2VudHJhbCI+MjAweDIwMDwvdGV4dD48L3N2Zz4=">
              <h4>Label</h4>
              <span class="text-muted">Something else</span>
            </div>
          </div>

          <h2 class="sub-header">Section title</h2>
          <div class="table-responsive">
            <table class="table table-striped">
              <thead>
                <tr>
                  <th>#</th>
                  <th>Header</th>
                  <th>Header</th>
                  <th>Header</th>
                  <th>Header</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>1,001</td>
                  <td>Lorem</td>
                  <td>ipsum</td>
                  <td>dolor</td>
                  <td>sit</td>
                </tr>
                <tr>
                  <td>1,002</td>
                  <td>amet</td>
                  <td>consectetur</td>
                  <td>adipiscing</td>
                  <td>elit</td>
                </tr>
                <tr>
                  <td>1,003</td>
                  <td>Integer</td>
                  <td>nec</td>
                  <td>odio</td>
                  <td>Praesent</td>
                </tr>
                <tr>
                  <td>1,003</td>
                  <td>libero</td>
                  <td>Sed</td>
                  <td>cursus</td>
                  <td>ante</td>
                </tr>
                <tr>
                  <td>1,004</td>
                  <td>dapibus</td>
                  <td>diam</td>
                  <td>Sed</td>
                  <td>nisi</td>
                </tr>
                <tr>
                  <td>1,005</td>
                  <td>Nulla</td>
                  <td>quis</td>
                  <td>sem</td>
                  <td>at</td>
                </tr>
                <tr>
                  <td>1,006</td>
                  <td>nibh</td>
                  <td>elementum</td>
                  <td>imperdiet</td>
                  <td>Duis</td>
                </tr>
                <tr>
                  <td>1,007</td>
                  <td>sagittis</td>
                  <td>ipsum</td>
                  <td>Praesent</td>
                  <td>mauris</td>
                </tr>
                <tr>
                  <td>1,008</td>
                  <td>Fusce</td>
                  <td>nec</td>
                  <td>tellus</td>
                  <td>sed</td>
                </tr>
                <tr>
                  <td>1,009</td>
                  <td>augue</td>
                  <td>semper</td>
                  <td>porta</td>
                  <td>Mauris</td>
                </tr>
                <tr>
                  <td>1,010</td>
                  <td>massa</td>
                  <td>Vestibulum</td>
                  <td>lacinia</td>
                  <td>arcu</td>
                </tr>
                <tr>
                  <td>1,011</td>
                  <td>eget</td>
                  <td>nulla</td>
                  <td>Class</td>
                  <td>aptent</td>
                </tr>
                <tr>
                  <td>1,012</td>
                  <td>taciti</td>
                  <td>sociosqu</td>
                  <td>ad</td>
                  <td>litora</td>
                </tr>
                <tr>
                  <td>1,013</td>
                  <td>torquent</td>
                  <td>per</td>
                  <td>conubia</td>
                  <td>nostra</td>
                </tr>
                <tr>
                  <td>1,014</td>
                  <td>per</td>
                  <td>inceptos</td>
                  <td>himenaeos</td>
                  <td>Curabitur</td>
                </tr>
                <tr>
                  <td>1,015</td>
                  <td>sodales</td>
                  <td>ligula</td>
                  <td>in</td>
                  <td>libero</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>

</body>
</html>